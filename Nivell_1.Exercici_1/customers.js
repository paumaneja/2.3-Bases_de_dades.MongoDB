db.createCollection('customers', {validator: {$jsonSchema: {bsonType: 'object',title: 'customers',required: ['name','data'],properties:{name:{bsonType: 'string'},data:{bsonType: 'object',title: 'object',required: ['phone','email','register_date'],properties:{address:{bsonType: 'object',title: 'object',properties:{street:{bsonType: 'string'},num:{bsonType: 'int'},floor:{bsonType: 'int'},door:{bsonType: 'int'},city:{bsonType: 'string'},postal_code:{bsonType: 'string'},country:{bsonType: 'string'}}},phone:{bsonType: 'string'},email:{bsonType: 'string'},register_date:{bsonType: 'date'}}},recommended_by:{bsonType: 'objectId'},last_shoppings:{bsonType: 'object',title: 'object',required: ['glass','supplier','employee','sale_date'],properties:{glass:{bsonType: 'object',title: 'object',required: ['brand','graduation_L','graduation_R','frame_type','frame_color','color_glass_L','color_glass_R','price'],properties:{brand:{bsonType: 'string'},graduation_L:{bsonType: 'decimal'},graduation_R:{bsonType: 'decimal'},frame_type:{enum: },frame_color:{bsonType: 'string'},color_glass_L:{bsonType: 'string'},color_glass_R:{bsonType: 'string'},price:{bsonType: 'decimal'}}},supplier:{bsonType: 'object',title: 'object',required: ['name','address','phone','NIF'],properties:{name:{bsonType: 'string'},address:{bsonType: 'object',title: 'object',properties:{street:{bsonType: 'string'},num:{bsonType: 'int'},floor:{bsonType: 'int'},door:{bsonType: 'int'},city:{bsonType: 'string'},postal_code:{bsonType: 'string'},country:{bsonType: 'string'}}},phone:{bsonType: 'string'},fax:{bsonType: 'string'},NIF:{bsonType: 'string'}}},employee:{bsonType: 'object',title: 'object',required: ['name','phone','email','NIF'],properties:{name:{bsonType: 'string'},phone:{bsonType: 'string'},email:{bsonType: 'string'},NIF:{bsonType: 'string'}}},sale_date:{bsonType: 'timestamp'}}}}}}});